{% extends "base.html" %}
{% block title %}{{ "Edit Employee" if editing else "New Employee" }} - HR - ERP{% endblock %}
{% block content %}
<div class="page-header">
    <h1>{{ "Edit Employee" if editing else "New Employee" }}</h1>
</div>

<div class="card">
    <form method="post">
        <div class="form-row">
            <div class="form-group">
                <label>First Name *</label>
                <input type="text" name="first_name" value="{{ employee.get('first_name', '') if employee is mapping else (employee['first_name'] or '') }}" required autofocus>
            </div>
            <div class="form-group">
                <label>Last Name *</label>
                <input type="text" name="last_name" value="{{ employee.get('last_name', '') if employee is mapping else (employee['last_name'] or '') }}" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" value="{{ employee.get('email', '') if employee is mapping else (employee['email'] or '') }}">
            </div>
            <div class="form-group">
                <label>Phone</label>
                <input type="text" name="phone" value="{{ employee.get('phone', '') if employee is mapping else (employee['phone'] or '') }}">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Department</label>
                {% set dept_id = employee.get('department_id', '') if employee is mapping else (employee['department_id'] if employee else '') %}
                <select name="department_id">
                    <option value="">-- Select Department --</option>
                    {% for dept in departments %}
                    <option value="{{ dept.id }}" {% if dept.id|string() == dept_id|string() %}selected{% endif %}>{{ dept.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>Job Title</label>
                <input type="text" name="job_title" value="{{ employee.get('job_title', '') if employee is mapping else (employee['job_title'] or '') }}">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Hire Date</label>
                <input type="date" name="hire_date" value="{{ employee.get('hire_date', '') if employee is mapping else (employee['hire_date'] or '') }}">
            </div>
            <div class="form-group">
                <label>Salary</label>
                <input type="number" name="salary" step="0.01" min="0" value="{{ employee.get('salary', '') if employee is mapping else (employee['salary'] or '0') }}">
            </div>
        </div>

        <div class="actions">
            <button type="submit" class="btn btn-primary">{{ "Update Employee" if editing else "Create Employee" }}</button>
            <a href="{{ url_for('hr.index') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
