{% extends "base.html" %}
{% block title %}New Leave Request - {{ employee.first_name }} {{ employee.last_name }} - HR - ERP{% endblock %}
{% block content %}
<div class="page-header">
    <h1>New Leave Request</h1>
</div>

<div class="card mb-1">
    <p>Employee: <strong>{{ employee.employee_number }}</strong> - {{ employee.first_name }} {{ employee.last_name }}</p>
</div>

<div class="card">
    <form method="post">
        <div class="form-group">
            <label>Leave Type *</label>
            {% set lt = leave.get('leave_type', '') if leave is mapping else '' %}
            <select name="leave_type" required>
                <option value="">-- Select Type --</option>
                <option value="annual" {% if lt == 'annual' %}selected{% endif %}>Annual</option>
                <option value="sick" {% if lt == 'sick' %}selected{% endif %}>Sick</option>
                <option value="personal" {% if lt == 'personal' %}selected{% endif %}>Personal</option>
                <option value="unpaid" {% if lt == 'unpaid' %}selected{% endif %}>Unpaid</option>
            </select>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Start Date *</label>
                <input type="date" name="start_date" value="{{ leave.get('start_date', '') if leave is mapping else '' }}" required>
            </div>
            <div class="form-group">
                <label>End Date *</label>
                <input type="date" name="end_date" value="{{ leave.get('end_date', '') if leave is mapping else '' }}" required>
            </div>
        </div>

        <div class="form-group">
            <label>Reason</label>
            <textarea name="reason">{{ leave.get('reason', '') if leave is mapping else '' }}</textarea>
        </div>

        <div class="actions">
            <button type="submit" class="btn btn-primary">Submit Leave Request</button>
            <a href="{{ url_for('hr.detail', id=employee.id) }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
